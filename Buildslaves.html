
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Buildslaves &mdash; Plop 1.0.0dev706 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.0dev706',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Plop 1.0.0dev706 documentation"
          href="_static/opensearch.xml"/>
    <link rel="top" title="Plop 1.0.0dev706 documentation" href="index.html" />
    <link rel="up" title="Contributing" href="Contribute.html" />
    <link rel="next" title="Licenses" href="License.html" />
    <link rel="prev" title="Contributing" href="Contribute.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="License.html" title="Licenses"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="Contribute.html" title="Contributing"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Plop 1.0.0dev706 documentation</a> &raquo;</li>
          <li><a href="Contribute.html" accesskey="U">Contributing</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <blockquote>
<div></div></blockquote>
<div class="section" id="buildslaves">
<h1><a class="toc-backref" href="#id1">Buildslaves</a><a class="headerlink" href="#buildslaves" title="Permalink to this headline">¶</a></h1>
<p>A buildslave is a machine that runs continuous integration tasks for the
project. Such tasks include running unit tests after every commit, building
the online documentation, packaging the project, etc.</p>
<p>If you wish to contribute a machine for the project, this page explains how to
do so.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#buildslaves" id="id1">Buildslaves</a><ul>
<li><a class="reference internal" href="#foreword" id="id2">Foreword</a></li>
<li><a class="reference internal" href="#microsoft-windows" id="id3">Microsoft Windows</a></li>
<li><a class="reference internal" href="#linux" id="id4">Linux</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="foreword">
<h2><a class="toc-backref" href="#id2">Foreword</a><a class="headerlink" href="#foreword" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even though a buildslave can do many things, we only discuss use of
buildslaves to run unit tests in the context of this page. That&#8217;s because
we do not intend to make remote machines handle critical tasks such as
packaging that involve digital signatures.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When running a buildslave, some PHP code will be run on your system without
requiring any prior confirmation. This may represent a risk for your
machine. Even though we do our best to prevent malicious code execution
on the buildslaves, we still depend on external services (GitHub, Transifex,
etc.) and we cannot guarantee that no malicious code will ever be injected
in the repository.</p>
<p>We therefore strongly encourage you to take every necessary precaution
<strong>before</strong> running the buildslave. This means that you should at least:</p>
<ul class="simple">
<li>Make sure your system is up-to-date regarding security patches.</li>
<li>Run an antivirus with up-to-date virus signatures.</li>
<li>Create a specific unprivileged account for the buildslave.</li>
<li>Run the buildslave in a jail/chroot environment on platforms
that support this feature.</li>
</ul>
<p class="last">By providing a buildslave, you agree that you understand and accept all of
the risks mentionned above and that you are sole responsible for ensuring
the security of your machine. If you don&#8217;t, please <strong>do not</strong> submit a
request to be registered as a buildslave.</p>
</div>
<p>We already host one buildslave and a few virtual machines that each come with
their own buildslave. At the time of this writing, the project is tested
against the following operating systems / distributions:</p>
<ul class="simple">
<li>Microsoft Windows XP SP3 i386 (virtual machine)</li>
<li>CentOS 6.2 i386 (virtual machine)</li>
<li>Debian 6.0 x86_64</li>
</ul>
<p>Each buildslave runs with a variety of PHP versions (usually only one, but
sometimes more). We use <a class="reference external" href="https://github.com/fpoirotte/phpfarm">phpfarm</a> to manage the different versions.
Each version of PHP is tested separately and a buildslave can use
up to 10 different PHP versions.</p>
<p>Since the buildmaster (the server that tells the buildslaves to test something)
has no knowledge of what versions a given buildslave has, the buildslave must
declare the versions it supports. To do so, code such as the following must be
added at the very beginning of the buildslave&#8217;s <tt class="file docutils literal"><span class="pre">buildbot.tac</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP1_PATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/home/foo/phpfarm/inst/php-5.2.17-debug/bin/:/home/foo/phpfarm/inst/php-5.2.17-debug/&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP2_PATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/home/foo/phpfarm/inst/php-5.3.10-debug/bin/:/home/foo/phpfarm/inst/php-5.3.10-debug/&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP3_PATH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/home/foo/phpfarm/inst/php-5.4.0-debug/bin/:/home/foo/phpfarm/inst/php-5.4.0-debug/&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP1_DESC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;5.2.17-debug&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP2_DESC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;5.3.10-debug&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP3_DESC&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;5.4.0-debug&#39;</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PHP_MAIN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;3&#39;</span>
</pre></div>
</div>
<p>The <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHPx_PATH</span></tt> environment variables specify additional directories
to add to the <span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PATH</span></tt> environment variable when using the PHP version
with identifier <tt class="docutils literal"><span class="pre">x</span></tt>. You may specify multiple paths by using the appropriate
separator for your operating system (eg. colon on Linux, semi-colon on Windows).</p>
<p>The <span class="target" id="index-2"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHPx_DESC</span></tt> lines specify the name of the executable to use to run
the PHP version with identifier <tt class="docutils literal"><span class="pre">x</span></tt>.</p>
<p>Last but not least, <span class="target" id="index-3"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHP_MAIN</span></tt> specifies what is considered the &#8220;main&#8221; PHP
version supported by the buildslave. When some PHP code must be run but we do
not care what version of PHP is used, the version with that identifier will be
used. In the example above, the main version is &#8216;3&#8217;, which refers to
PHP 5.4.0-debug.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The versions may be numbered from 1 to 10 <strong>with no gap in between</strong>.
Any gap in the numbering will result in the versions following the gap
to not be tested at all.</p>
<p class="last">If you want to test the code against more than 10 different versions,
either run a separate buildslave on the same machine with additional
versions or contact us on IRC or GitHub so that we increase the current
limit.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>At a minimum, you must define at least 3 variables (<span class="target" id="index-4"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHP1_PATH</span></tt>,
<span class="target" id="index-5"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHP1_DESC</span></tt> and <span class="target" id="index-6"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHP_MAIN</span></tt>, where <span class="target" id="index-7"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHP_MAIN</span></tt>
equals &#8220;1&#8221;).</p>
<p class="last">When adding a new version of PHP to test against, you must always specify
both the <span class="target" id="index-8"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHPx_PATH</span></tt> and <span class="target" id="index-9"></span><tt class="xref std std-envvar docutils literal"><span class="pre">PHPx_DESC</span></tt> variables</p>
</div>
</div>
<div class="section" id="microsoft-windows">
<h2><a class="toc-backref" href="#id3">Microsoft Windows</a><a class="headerlink" href="#microsoft-windows" title="Permalink to this headline">¶</a></h2>
<p>&#64;TODO</p>
</div>
<div class="section" id="linux">
<h2><a class="toc-backref" href="#id4">Linux</a><a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h2>
<p>&#64;TODO</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Buildslaves</a><ul>
<li><a class="reference internal" href="#foreword">Foreword</a></li>
<li><a class="reference internal" href="#microsoft-windows">Microsoft Windows</a></li>
<li><a class="reference internal" href="#linux">Linux</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="Contribute.html"
                        title="previous chapter">Contributing</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="License.html"
                        title="next chapter">Licenses</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="License.html" title="Licenses"
             >next</a></li>
        <li class="right" >
          <a href="Contribute.html" title="Contributing"
             >previous</a> |</li>
        <li><a href="index.html">Plop 1.0.0dev706 documentation</a> &raquo;</li>
          <li><a href="Contribute.html" >Contributing</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Erebot.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>