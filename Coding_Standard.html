
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Coding standard &mdash; Plop 1.0.0dev753 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.0dev753',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Plop 1.0.0dev753 documentation"
          href="_static/opensearch.xml"/>
    <link rel="top" title="Plop 1.0.0dev753 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">Plop 1.0.0dev753 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <blockquote>
<div></div></blockquote>
<div class="section" id="coding-standard">
<h1><a class="toc-backref" href="#id1">Coding standard</a><a class="headerlink" href="#coding-standard" title="Permalink to this headline">¶</a></h1>
<p>This page contains documentation on the coding standard used for Plop&#8217;s
development. It takes inspiration from other such documents, namely:</p>
<ul class="simple">
<li><a class="reference external" href="http://drupal.org/coding-standards">Drupal coding standards</a></li>
<li><a class="reference external" href="http://framework.zend.com/manual/en/coding-standard.coding-style.html">Zend Framework coding style</a></li>
<li><a class="reference external" href="http://pear.php.net/manual/en/standards.php">The PEAR coding standards</a></li>
</ul>
<p>Most of the information on this page is organized in the same way as the
Drupal coding standards.</p>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#coding-standard" id="id1">Coding standard</a><ul>
<li><a class="reference internal" href="#indenting-and-whitespace" id="id2">Indenting and whitespace</a></li>
<li><a class="reference internal" href="#operators" id="id3">Operators</a></li>
<li><a class="reference internal" href="#casting" id="id4">Casting</a></li>
<li><a class="reference internal" href="#control-structures" id="id5">Control structures</a></li>
<li><a class="reference internal" href="#line-length-and-wrapping" id="id6">Line length and wrapping</a></li>
<li><a class="reference internal" href="#function-method-calls" id="id7">Function/method calls</a></li>
<li><a class="reference internal" href="#function-method-declarations" id="id8">Function/method declarations</a></li>
<li><a class="reference internal" href="#class-constructor-calls" id="id9">Class constructor calls</a></li>
<li><a class="reference internal" href="#arrays" id="id10">Arrays</a></li>
<li><a class="reference internal" href="#quotes" id="id11">Quotes</a></li>
<li><a class="reference internal" href="#string-concatenations" id="id12">String concatenations</a></li>
<li><a class="reference internal" href="#comments" id="id13">Comments</a></li>
<li><a class="reference internal" href="#filesystem-paths" id="id14">Filesystem paths</a></li>
<li><a class="reference internal" href="#including-code" id="id15">Including code</a></li>
<li><a class="reference internal" href="#php-code-tags" id="id16">PHP code tags</a></li>
<li><a class="reference internal" href="#semicolons" id="id17">Semicolons</a></li>
<li><a class="reference internal" href="#example-urls" id="id18">Example URLs</a></li>
<li><a class="reference internal" href="#naming-conventions-functions-constants-global-variables-classes-files" id="id19">Naming Conventions (Functions, Constants, Global Variables, Classes, Files)</a><ul>
<li><a class="reference internal" href="#files" id="id20">Files</a></li>
<li><a class="reference internal" href="#classes-and-interfaces" id="id21">Classes and interfaces</a></li>
<li><a class="reference internal" href="#class-methods-and-properties" id="id22">Class methods and properties</a></li>
<li><a class="reference internal" href="#class-constructors" id="id23">Class constructors</a></li>
<li><a class="reference internal" href="#functions" id="id24">Functions</a></li>
<li><a class="reference internal" href="#constants" id="id25">Constants</a></li>
<li><a class="reference internal" href="#global-variables" id="id26">Global variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-your-code" id="id27">Check your code</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="indenting-and-whitespace">
<h2><a class="toc-backref" href="#id2">Indenting and whitespace</a><a class="headerlink" href="#indenting-and-whitespace" title="Permalink to this headline">¶</a></h2>
<p>Use an indent of 4 spaces, with no tabs.</p>
<p>Lines should have no trailing whitespace at the end.</p>
<p>Files should be formatted with \n as the line ending (Unix line endings),
not \r\n (Windows line endings).</p>
<p>All text files should end in a single newline (\n). This avoids the verbose
&#8220;\ No newline at end of file&#8221; patch warning and makes patches easier to read
since it&#8217;s clearer what is being changed when lines are added to the end of
a file.</p>
</div>
<div class="section" id="operators">
<h2><a class="toc-backref" href="#id3">Operators</a><a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h2>
<p>All binary operators (operators that come between two values),
such as <tt class="docutils literal"><span class="pre">+</span></tt>, <tt class="docutils literal"><span class="pre">-</span></tt>, <tt class="docutils literal"><span class="pre">=</span></tt>, <tt class="docutils literal"><span class="pre">!=</span></tt>, <tt class="docutils literal"><span class="pre">==</span></tt>, <tt class="docutils literal"><span class="pre">&gt;</span></tt>, etc. should have
a space before and after the operator, for readability.</p>
<p>For example, an assignment should be formatted as</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$foo</span> <span class="o">=</span> <span class="nv">$bar</span><span class="p">;</span>
</pre></div>
</div>
<p>rather than</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$foo</span><span class="o">=</span><span class="nv">$bar</span><span class="p">;</span>
</pre></div>
</div>
<p>As a special case for assigning operators, such as <tt class="docutils literal"><span class="pre">=</span></tt>, <tt class="docutils literal"><span class="pre">&amp;=</span></tt>, <tt class="docutils literal"><span class="pre">&lt;&lt;=</span></tt>, etc.
you may add several spaces before the operator when the code contains several
lines of assignments (lining up the equal signs) so as to improve readability:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nv">$foo</span>    <span class="o">=</span> <span class="m">42</span><span class="p">;</span>
    <span class="nv">$bar</span>   <span class="o">&amp;=</span> <span class="nv">$foo</span><span class="p">;</span>
    <span class="nv">$bar</span>  <span class="o">&lt;&lt;=</span> <span class="m">2</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>Unary operators (operators that operate on only one value), such as <tt class="docutils literal"><span class="pre">++</span></tt>,
should not have a space between the operator and the variable or number
they are operating on.</p>
<p>When using the ternary operator, add parentheses around the condition:
<tt class="docutils literal"><span class="pre">(...)</span> <span class="pre">?</span> <span class="pre">...</span> <span class="pre">:</span> <span class="pre">...</span></tt>.</p>
<p>Only wrap the ternary operator if the total length of the line exceeds
the 80 chars limit. In that case, add a single newline
before the <tt class="docutils literal"><span class="pre">?</span></tt> and <tt class="docutils literal"><span class="pre">:</span></tt> symbols, while adding enough spaces before them
so as to line up the 3 (three) parts of the operator:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nv">$longVariableNameCausingWrapping</span> <span class="o">=</span>  <span class="p">(</span><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">overridesDefaultValues</span><span class="p">())</span>
                                        <span class="o">?</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">getOverrides</span><span class="p">()</span>
                                        <span class="o">:</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="na">getDefaultValues</span><span class="p">();</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="casting">
<h2><a class="toc-backref" href="#id4">Casting</a><a class="headerlink" href="#casting" title="Permalink to this headline">¶</a></h2>
<p>Put a single space between the (type) and the operand of a cast:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="p">(</span><span class="nx">int</span><span class="p">)</span> <span class="nv">$mynumber</span>
</pre></div>
</div>
</div>
<div class="section" id="control-structures">
<h2><a class="toc-backref" href="#id5">Control structures</a><a class="headerlink" href="#control-structures" title="Permalink to this headline">¶</a></h2>
<p>Control structures include <tt class="docutils literal"><span class="pre">if</span></tt>, <tt class="docutils literal"><span class="pre">for</span></tt>, <tt class="docutils literal"><span class="pre">while</span></tt>, <tt class="docutils literal"><span class="pre">switch</span></tt>, etc.
Here is a sample <tt class="docutils literal"><span class="pre">if</span></tt> statement, since it is the most complicated of them:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">condition1</span> <span class="o">||</span> <span class="nx">condition2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">action1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">condition3</span> <span class="o">&amp;&amp;</span> <span class="nx">condition4</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">action2</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="nx">defaultaction</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Control statements should have one space between the control keyword
and opening parenthesis, to distinguish them from function calls.</p>
<p>Use <tt class="docutils literal"><span class="pre">else</span> <span class="pre">if</span></tt> instead of <tt class="docutils literal"><span class="pre">elseif</span></tt>.</p>
<p>You are strongly encouraged to always use curly braces even in situations
where they are technically optional.Having them increases readability
and decreases the likelihood of logic errors being introduced
when new lines are added.</p>
<p>The only exception to the rule above is to follow the &#8220;return/fail early&#8221;
principle where the action following a condition is a <tt class="docutils literal"><span class="pre">return</span></tt> or <tt class="docutils literal"><span class="pre">throw</span></tt>
statement and no line is ever going to be added to the action part.
More information on this principle and why you should follow it can be found
in the following blog entries:</p>
<ul class="simple">
<li><a class="reference external" href="http://vocamus.net/dave/?p=1421">http://vocamus.net/dave/?p=1421</a> (by a long time Mozilla contributor)</li>
<li><a class="reference external" href="http://saltybeagle.com/2011/06/fail-early/">http://saltybeagle.com/2011/06/fail-early/</a> (by Brett Bieber, one of the
main contributors to Pyrus, the next generation PEAR installer)</li>
</ul>
<p>For switch statements:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">switch</span> <span class="p">(</span><span class="nx">condition</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="m">1</span><span class="o">:</span>
        <span class="nx">action1</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

    <span class="k">case</span> <span class="m">2</span><span class="o">:</span>
        <span class="nx">action2</span><span class="p">;</span>
        <span class="c1">// defaultaction must also be executed in this case.</span>

    <span class="k">default</span><span class="o">:</span>
        <span class="nx">defaultaction</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is sometimes useful to write a case statement which falls through
to the next case by not including a <tt class="docutils literal"><span class="pre">break</span></tt> or <tt class="docutils literal"><span class="pre">return</span></tt> within
that case. To distinguish these cases from bugs, any case statement
where <tt class="docutils literal"><span class="pre">break</span></tt> or <tt class="docutils literal"><span class="pre">return</span></tt> are omitted should contain a comment
indicating that this is the intended behaviour.</p>
</div>
<p>For do-while statements:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">do</span> <span class="p">{</span>
    <span class="nx">actions</span><span class="p">;</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nv">$condition</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Use of the alternative forms for these structures is prohibited.
For example:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="c1">// DON&#39;T DO THIS</span>
    <span class="k">while</span> <span class="p">(</span><span class="nv">$foo</span><span class="p">)</span><span class="o">:</span>
        <span class="o">...</span>
    <span class="k">endwhile</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="line-length-and-wrapping">
<h2><a class="toc-backref" href="#id6">Line length and wrapping</a><a class="headerlink" href="#line-length-and-wrapping" title="Permalink to this headline">¶</a></h2>
<p>The following rules apply to code:</p>
<ul>
<li><p class="first">In general, all lines of code should not be longer than 80
chars.</p>
</li>
<li><p class="first">Long control structure conditions should be wrapped into multiple lines
so as not to break the 80 chars rule.</p>
<p>Whenever possible, try to prepare values related to the condition
beforehand (storing them in temporary variables if necessary).</p>
<p>So, instead of this:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nv">$something</span><span class="p">[</span><span class="s1">&#39;with&#39;</span><span class="p">][</span><span class="s1">&#39;something&#39;</span><span class="p">][</span><span class="s1">&#39;else&#39;</span><span class="p">][</span><span class="s1">&#39;in&#39;</span><span class="p">][</span><span class="s1">&#39;here&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nx">mymodule_check_something</span><span class="p">(</span><span class="nv">$whatever</span><span class="p">[</span><span class="s1">&#39;else&#39;</span><span class="p">]))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>use the following snippet:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$here</span> <span class="o">=</span> <span class="nv">$something</span><span class="p">[</span><span class="s1">&#39;with&#39;</span><span class="p">][</span><span class="s1">&#39;something&#39;</span><span class="p">][</span><span class="s1">&#39;else&#39;</span><span class="p">][</span><span class="s1">&#39;in&#39;</span><span class="p">][</span><span class="s1">&#39;here&#39;</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$here</span> <span class="o">==</span> <span class="nx">mymodule_check_something</span><span class="p">(</span><span class="nv">$whatever</span><span class="p">[</span><span class="s1">&#39;else&#39;</span><span class="p">]))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When breaking a test composed of several conditions, wrap the conditions
after the operator (<tt class="docutils literal"><span class="pre">&amp;&amp;</span></tt> or <tt class="docutils literal"><span class="pre">||</span></tt>) and indent the next line
using 4 spaces so as to line up the conditions.</p>
<p>So, instead of this snippet:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$something</span><span class="p">[</span><span class="s1">&#39;what&#39;</span><span class="p">][</span><span class="s1">&#39;ever&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nv">$something</span><span class="p">[</span><span class="s1">&#39;what&#39;</span><span class="p">][</span><span class="s1">&#39;ever&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$infinite</span> <span class="o">&amp;&amp;</span> <span class="nx">user_access</span><span class="p">(</span><span class="s1">&#39;galaxy&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>use this one:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$something</span><span class="p">[</span><span class="s1">&#39;what&#39;</span><span class="p">][</span><span class="s1">&#39;ever&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
    <span class="nv">$something</span><span class="p">[</span><span class="s1">&#39;what&#39;</span><span class="p">][</span><span class="s1">&#39;ever&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nv">$infinite</span> <span class="o">&amp;&amp;</span>
    <span class="nx">user_access</span><span class="p">(</span><span class="s1">&#39;galaxy&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Control structure conditions should also <strong>NOT</strong> attempt to win the
<em>Most Compact Condition In Least Lines Of Code Award™</em>:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="c1">// DON&#39;T DO THIS!</span>
<span class="k">if</span> <span class="p">((</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">uid</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$key</span> <span class="o">==</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">uid</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">cache</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">cache</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="nx">ip_address</span><span class="p">()</span> <span class="o">||</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$value</span> <span class="o">&gt;=</span> <span class="nb">time</span><span class="p">()))</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Instead, it is recommended practice to split out and prepare the conditions
separately, which also permits documenting the underlying reasons for the
conditions:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="c1">// Key is only valid if it matches the current user&#39;s ID, as otherwise other</span>
<span class="c1">// users could access any user&#39;s things.</span>
<span class="nv">$is_valid_user</span> <span class="o">=</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">uid</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$key</span> <span class="o">==</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">uid</span><span class="p">);</span>

<span class="c1">// IP must match the cache to prevent session spoofing.</span>
<span class="nv">$is_valid_cache</span> <span class="o">=</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">cache</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">cache</span> <span class="o">==</span> <span class="nx">ip_address</span><span class="p">()</span> <span class="o">:</span> <span class="k">FALSE</span><span class="p">);</span>

<span class="c1">// Alternatively, if the request query parameter is in the future, then it</span>
<span class="c1">// is always valid, because the galaxy will implode and collapse anyway.</span>
<span class="nv">$is_valid_query</span> <span class="o">=</span> <span class="nv">$is_valid_cache</span> <span class="o">||</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$value</span> <span class="o">&gt;=</span> <span class="nb">time</span><span class="p">());</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$is_valid_user</span> <span class="o">||</span> <span class="nv">$is_valid_query</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This example is still a bit dense. Always consider and decide on your
own whether people unfamiliar with your code will be able to make sense
of the logic.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="function-method-calls">
<h2><a class="toc-backref" href="#id7">Function/method calls</a><a class="headerlink" href="#function-method-calls" title="Permalink to this headline">¶</a></h2>
<p>Functions and methods should be called with no spaces between the function name,
the opening parenthesis, and the first parameter; spaces between commas
and each parameter, and no space between the last parameter,
the closing parenthesis, and the semicolon.</p>
<p>Here&#8217;s an example:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$var</span> <span class="o">=</span> <span class="nx">foo</span><span class="p">(</span><span class="nv">$bar</span><span class="p">,</span> <span class="nv">$baz</span><span class="p">,</span> <span class="nv">$qux</span><span class="p">);</span>
</pre></div>
</div>
<p>As displayed above, there should be one space on either side of an equals
sign used to assign the return value of a function to a variable
(as documented in the section on <a class="reference internal" href="#operators">Operators</a>).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Call-time pass-by-reference is strictly prohibited. See the section on
<a class="reference internal" href="#cs-fn-decl"><em>function/method declarations</em></a> for the proper way
to pass function arguments by-reference.</p>
</div>
<p>In the case of a block of related assignments, more space may be inserted
to line up function calls and promote readability:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$short</span>         <span class="o">=</span> <span class="nx">foo</span><span class="p">(</span><span class="nv">$bar</span><span class="p">);</span>
<span class="nv">$longVariable</span>  <span class="o">=</span> <span class="nx">foo</span><span class="p">(</span><span class="nv">$baz</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For methods/functions defined by the core of PHP or any of its extension,
(that is, anything that isn&#8217;t userland-define), always respect the case
given by the PHP manual. Even though PHP is case-insensitive for most
identifiers, there are recurring propositions about turning it into
a case-sensitive language for everything. Using the official case
from the start makes the code forward-compatible if such a change is
ever made.</p>
</div>
</div>
<div class="section" id="function-method-declarations">
<span id="cs-fn-decl"></span><h2><a class="toc-backref" href="#id8">Function/method declarations</a><a class="headerlink" href="#function-method-declarations" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We recommend that you use classes instead of functions in your code,
even if it means creating classes containing static methods only.
The rationale behind this decision being that it avoids global scope
name pollution.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Call-time pass-by-reference is strictly prohibited.</p>
</div>
<p>Always put the opening curly brace on a new line.</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">function</span> <span class="nf">funstuff_system</span><span class="p">(</span><span class="nv">$field</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nv">$system</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">t</span><span class="p">(</span><span class="s2">&quot;This module inserts funny text into posts randomly.&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$system</span><span class="p">[</span><span class="nv">$field</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Arguments with default values go at the end of the argument list.</p>
<p>Use type-hints whenever possible, but only if the type-hint is <tt class="docutils literal"><span class="pre">array</span></tt>
or <strong>refers to an interface</strong>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="c1">// Wrong:</span>
    <span class="k">function</span> <span class="nf">make_cat_speak</span><span class="p">(</span><span class="nx">GarfieldTheCat</span> <span class="nv">$cat</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">print</span> <span class="nv">$cat</span><span class="o">-&gt;</span><span class="na">meow</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// Correct:</span>
    <span class="k">function</span> <span class="nf">make_cat_speak</span><span class="p">(</span><span class="nx">FelineInterface</span> <span class="nv">$cat</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">print</span> <span class="nv">$cat</span><span class="o">-&gt;</span><span class="na">meow</span><span class="p">();</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>For classes provided by PHP or one of its extensions (e.g. <a class="reference external" href="http://php.net/DOMDocument">DOMDocument</a>),
consider writing an interface for it and use that as a type-hint.</p>
<p>Using an interface instead of a class name in the type-hint makes it easier
to use a class that provides the same features (the same API) through
a different implementation. This is especially useful when unit testing
the function.</p>
<p>When a function or method&#8217;s arguments list exceeds the 80 chars
limit, use a single newline after the opening parentheses, write each argument
on a separate line and put the closing parentheses on a separate line too.
Indent each argument&#8217;s line by 4 (four) spaces and add extra spaces to line up
the arguments&#8217; dollar sign whenever type-hints and/or references are used
In this case, the closing parentheses and the opening curly brace
that follows it should still be on separate lines:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">function</span> <span class="nf">foobar</span><span class="p">(</span>
    <span class="nx">Foo_Interface</span>                   <span class="nv">$foo</span><span class="p">,</span>
    <span class="nx">FooBar_Converter_Interface</span>      <span class="nv">$converter</span><span class="p">,</span>
                                   <span class="o">&amp;</span><span class="nv">$qux</span>
<span class="p">)</span>
<span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Last but not least, always attempt to return a meaningful value from a function
if one is appropriate. If no meaningful value exist, consider returning <tt class="docutils literal"><span class="pre">NULL</span></tt>
or an empty array instead of <tt class="docutils literal"><span class="pre">FALSE</span></tt>.</p>
<p>The return value must not be enclosed in parentheses.
This can hinder readability, in addition to breaking code
if a method is later changed to return by reference.</p>
<p>For example:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="k">function</span> <span class="nf">send_notificationWRONG</span><span class="p">(</span><span class="nx">User_Interface</span> <span class="nv">$user</span><span class="p">,</span> <span class="nv">$message</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">valid</span><span class="p">())</span> <span class="p">{</span>
        <span class="c1">// WRONG:   makes it harder to distinguish an invalid user</span>
        <span class="c1">//          from a failure while sending the notification.</span>
        <span class="k">return</span> <span class="k">FALSE</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// WRONG:   will trigger a fatal error if the function</span>
    <span class="c1">//          is ever modified to return by reference.</span>
    <span class="k">return</span> <span class="p">(</span><span class="nb">mail</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getMail</span><span class="p">(),</span> <span class="s1">&#39;Notification&#39;</span><span class="p">,</span> <span class="nv">$message</span><span class="p">));</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">send_notificationOK</span><span class="p">(</span><span class="nx">User_Interface</span> <span class="nv">$user</span><span class="p">,</span> <span class="nv">$message</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">valid</span><span class="p">())</span>
        <span class="k">return</span> <span class="k">NULL</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">mail</span><span class="p">(</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">getMail</span><span class="p">(),</span> <span class="s1">&#39;Notification&#39;</span><span class="p">,</span> <span class="nv">$message</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Exceptions may also be used instead of returning <tt class="docutils literal"><span class="pre">NULL</span></tt>.
Whether an exception should be raised or <tt class="docutils literal"><span class="pre">NULL</span></tt> / an empty array
returned is left to the appreciation of developpers.</p>
</div>
<div class="section" id="class-constructor-calls">
<h2><a class="toc-backref" href="#id9">Class constructor calls</a><a class="headerlink" href="#class-constructor-calls" title="Permalink to this headline">¶</a></h2>
<p>When calling class constructors with no arguments, always include parentheses:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyClassName</span><span class="p">();</span>
</pre></div>
</div>
<p>This is to maintain consistency with constructors that have arguments:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyClassName</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that if the class name is a variable, the variable will be evaluated
first to get the class name, and then the constructor will be called.</p>
<p>Use the same syntax:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$bar</span> <span class="o">=</span> <span class="s1">&#39;MyClassName&#39;</span><span class="p">;</span>
<span class="nv">$foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nv">$bar</span><span class="p">();</span>
<span class="nv">$foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nv">$bar</span><span class="p">(</span><span class="nv">$arg1</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="arrays">
<h2><a class="toc-backref" href="#id10">Arrays</a><a class="headerlink" href="#arrays" title="Permalink to this headline">¶</a></h2>
<p>Arrays should be formatted with a space separating each element
(after the comma), and spaces around the <tt class="docutils literal"><span class="pre">=&gt;</span></tt> key association operator,
if applicable:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$some_array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>Note that if the line declaring an array spans longer than 80
characters, each element should be broken into its own line, and indented
one level.
Extra spaces may be added before the <tt class="docutils literal"><span class="pre">=&gt;</span></tt> operator to increase readability:</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$form</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;#type&#39;</span>         <span class="o">=&gt;</span> <span class="s1">&#39;textfield&#39;</span><span class="p">,</span>
    <span class="s1">&#39;#title&#39;</span>        <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;Title&#39;</span><span class="p">),</span>
    <span class="s1">&#39;#size&#39;</span>         <span class="o">=&gt;</span> <span class="m">60</span><span class="p">,</span>
    <span class="s1">&#39;#maxlength&#39;</span>    <span class="o">=&gt;</span> <span class="m">128</span><span class="p">,</span>
    <span class="s1">&#39;#description&#39;</span>  <span class="o">=&gt;</span> <span class="nx">t</span><span class="p">(</span><span class="s1">&#39;The title of your node.&#39;</span><span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Always add a comma at the end of the last array element.
It helps prevent parsing errors if another element is placed at the end
of the list later.</p>
</div>
</div>
<div class="section" id="quotes">
<h2><a class="toc-backref" href="#id11">Quotes</a><a class="headerlink" href="#quotes" title="Permalink to this headline">¶</a></h2>
<p>Plop does not have a hard standard for the use of single quotes vs.
double quotes. Where possible, keep consistency within each file,
and respect the personal style of other developers.</p>
<p>With that caveat in mind: single quote strings are known to be faster
because the parser doesn&#8217;t have to look for in-line variables.
Their use is recommended except in two cases:</p>
<blockquote>
<div><ol class="arabic simple">
<li>In-line variable usage, e.g. <tt class="docutils literal"><span class="pre">&lt;h2&gt;$header&lt;/h2&gt;</span></tt>.</li>
<li>Translated strings where one can avoid escaping single quotes
by enclosing the string in double quotes.
One such string would be &#8220;He&#8217;s a good person.&#8221;
This string would become &#8216;He&#8217;s a good person.&#8217; with single quotes.
Such escaping may not be handled properly by .pot file generators
for text translation, and it&#8217;s also somewhat awkward to read.</li>
</ol>
</div></blockquote>
<p>For long chunks of texts, you may also <a class="reference external" href="http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc">heredoc/nowdoc strings</a>,
except when the text needs to be translated, because the current parser
for translations does not pick them up.</p>
</div>
<div class="section" id="string-concatenations">
<h2><a class="toc-backref" href="#id12">String concatenations</a><a class="headerlink" href="#string-concatenations" title="Permalink to this headline">¶</a></h2>
<p>We recommend that you always use a space between the dot and the concatenated
parts to improve readability (we current ruleset does not enforce this rule
though).</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nv">$string</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span> <span class="o">.</span> <span class="nv">$bar</span><span class="p">;</span>
    <span class="nv">$string</span> <span class="o">=</span> <span class="nv">$bar</span> <span class="o">.</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span>
    <span class="nv">$string</span> <span class="o">=</span> <span class="nx">bar</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;foo&#39;</span><span class="p">;</span>
    <span class="nv">$string</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span> <span class="o">.</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>When you concatenate simple variables, you can use double quotes and add
the variable inside; otherwise, use single quotes.</p>
<div class="highlight-inline-php"><div class="highlight"><pre><span class="nv">$string</span> <span class="o">=</span> <span class="s2">&quot;Foo </span><span class="si">$bar</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>When using the concatenating assignment operator <tt class="docutils literal"><span class="pre">.=</span></tt>, use a space
on each side as with the assignment operator:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="nv">$string</span> <span class="o">.=</span> <span class="s1">&#39;Foo&#39;</span><span class="p">;</span>
    <span class="nv">$string</span> <span class="o">.=</span> <span class="nv">$bar</span><span class="p">;</span>
    <span class="nv">$string</span> <span class="o">.=</span> <span class="nx">baz</span><span class="p">();</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="comments">
<h2><a class="toc-backref" href="#id13">Comments</a><a class="headerlink" href="#comments" title="Permalink to this headline">¶</a></h2>
<p>Don&#8217;t use Perl-style commands (<tt class="docutils literal"><span class="pre">#</span> <span class="pre">Comment</span></tt>). For comments that span several
lines, we recommend that you use C++ comments (<tt class="docutils literal"><span class="pre">/*</span> <span class="pre">Comment</span> <span class="pre">*/</span></tt>).</p>
<p>When using C++ comments, you may use asterisks (&#8220;stars&#8221;) at the start of each
line.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Use of comments such as <tt class="docutils literal"><span class="pre">/**</span> <span class="pre">...</span> <span class="pre">*/</span></tt> or <tt class="docutils literal"><span class="pre">///</span></tt> is reserved for API
documentation purposes using <a class="reference external" href="http://www.stack.nl/~dimitri/doxygen/commands.html">Doxygen commands</a>.
You <strong>MAY NOT</strong> use them to explain the logic of your code.
Use the regular forms <tt class="docutils literal"><span class="pre">/*</span> <span class="pre">...</span> <span class="pre">*/</span></tt> &amp; <tt class="docutils literal"><span class="pre">//</span></tt> instead in such cases.</p>
</div>
<p>For example,</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="c1">// Connects the bot to the default servers.</span>
    <span class="nv">$bot</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">();</span>

    <span class="cm">/* This is a very long comment about the purpose of the snippet</span>
<span class="cm">     * of code that goes right after this comment, so as to explain</span>
<span class="cm">     * what it does (in case this may not be easy to understand) as</span>
<span class="cm">     * well as how it is done (for example, to describe side-effects).</span>
<span class="cm">     */</span>
    <span class="nx">do_something_very_complex</span><span class="p">();</span>

    <span class="c1"># This kind of comments MUST NOT be used.</span>
    <span class="nx">oops</span><span class="p">();</span>

    <span class="sd">/**</span>
<span class="sd">     * \brief</span>
<span class="sd">     *      A well known pseudo-random number generator.</span>
<span class="sd">     *</span>
<span class="sd">     * This type of comments may only be used to describe the API,</span>
<span class="sd">     * using Doxygen commands.</span>
<span class="sd">     */</span>
    <span class="k">class</span> <span class="nc">PRNG</span>
    <span class="p">{</span>
        <span class="c1">// The next comment describes part of this class&#39; API.</span>
        <span class="c1">/// Seed for the PRNG.</span>
        <span class="k">const</span> <span class="no">SEED</span> <span class="o">=</span> <span class="m">4</span><span class="p">;</span>

        <span class="sd">/**</span>
<span class="sd">         * \brief</span>
<span class="sd">         *      Return a new random number.</span>
<span class="sd">         *</span>
<span class="sd">         * \retval int</span>
<span class="sd">         *      Some random number.</span>
<span class="sd">         */</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getRandomNumber</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nx">self</span><span class="o">::</span><span class="na">SEED</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<div class="admonition-todo admonition " id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Add a section on API documentation.</p>
</div>
</div>
<div class="section" id="filesystem-paths">
<span id="cs-fs-paths"></span><h2><a class="toc-backref" href="#id14">Filesystem paths</a><a class="headerlink" href="#filesystem-paths" title="Permalink to this headline">¶</a></h2>
<p>Never use any OS-specific directory separator (e.g. &#8220;/&#8221;) directly to concatenate
parts of a path together. Always use the <tt class="docutils literal"><span class="pre">DIRECTORY_SEPARATOR</span></tt> constant
instead as it will take care of abstracting differences in the separator used
by each OS for you.</p>
</div>
<div class="section" id="including-code">
<h2><a class="toc-backref" href="#id15">Including code</a><a class="headerlink" href="#including-code" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For code that is part of Plop itself, you don&#8217;t need to manually include
any file as the autoloader will load the files on the fly whenever this is
required.</p>
</div>
<p>Anywhere you are unconditionally including a class file, use <tt class="docutils literal"><span class="pre">require_once()</span></tt>.
Anywhere you are conditionally including a class file (for example,
factory methods), use <tt class="docutils literal"><span class="pre">include_once()</span></tt>.
Either of these will ensure that class files are included only once.
They share the same file list, so you don&#8217;t need to worry about mixing them—a file included with <tt class="docutils literal"><span class="pre">require_once()</span></tt> will not be included again
by <tt class="docutils literal"><span class="pre">include_once()</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">include_once()</span></tt> and <tt class="docutils literal"><span class="pre">require_once()</span></tt> are statements and not functions.
Having said that, we recommend that you always put parentheses around the
file name to be included, even though this is not necessary from a technical
point of view. This makes the coding style coherent with that of functions.</p>
</div>
<p>Never use relative paths when including code, always build an absolute path.
You may use the <tt class="docutils literal"><span class="pre">__FILE__</span></tt> magical constant and the <tt class="docutils literal"><span class="pre">dirname()</span></tt> function
to help you build such a path.
See also the <a class="reference internal" href="#cs-fs-paths"><em>conventions for filesystem paths</em></a>
for more information.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even for external libraries, we recommend that you use the autoloader
provided by those libraries if one is available instead of manually
including their code.</p>
</div>
</div>
<div class="section" id="php-code-tags">
<h2><a class="toc-backref" href="#id16">PHP code tags</a><a class="headerlink" href="#php-code-tags" title="Permalink to this headline">¶</a></h2>
<p>Always use :</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>to delimit PHP code, not the shorthand,</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?</span> <span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>or other exotic tags allowed by PHP:</p>
<div class="highlight-python"><pre>&lt;script language="php"&gt;
    // DON'T USE THIS TAG.
    //
    // Many tools do not even recognize this block
    // as containing some PHP code.
    //
    // Also, the "language" attribute on script tags
    // has been deprecated since HTML 4.01.
&lt;/script&gt;

&lt;%
    // DON'T USE THIS TAG EITHER.
    // This tag conflicts with the one used for ASP code.
%&gt;</pre>
</div>
<p>This is required for portability across differing operating systems
and set-ups.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Never use a closing <tt class="docutils literal"><span class="pre">?&gt;</span></tt> at the end of code files:</p>
<ul class="last simple">
<li>Removing it eliminates the possibility for unwanted whitespace
at the end of files which can cause strange outputs to the console.</li>
<li>The closing delimiter at the end of a file is optional anyway.</li>
<li>PHP.net itself removes the closing delimiter from the end of its files
(example: prepend.inc), so this can be seen as a &#8220;best practice.&#8221;</li>
</ul>
</div>
</div>
<div class="section" id="semicolons">
<h2><a class="toc-backref" href="#id17">Semicolons</a><a class="headerlink" href="#semicolons" title="Permalink to this headline">¶</a></h2>
<p>The PHP language requires semicolons at the end of most lines,
but allows them to be omitted at the end of code blocks.</p>
<p>Plop coding standards require them, even at the end of code blocks.
In particular, for one-line PHP blocks:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="k">print</span> <span class="nv">$tax</span><span class="p">;</span> <span class="c1">// YES</span>
<span class="cp">?&gt;</span><span class="x"></span>
<span class="cp">&lt;?php</span>
    <span class="k">print</span> <span class="nv">$tax</span>  <span class="c1">// NO</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="example-urls">
<h2><a class="toc-backref" href="#id18">Example URLs</a><a class="headerlink" href="#example-urls" title="Permalink to this headline">¶</a></h2>
<p>Use <tt class="docutils literal"><span class="pre">example.com</span></tt> as the domain for all example URLs, per <span class="target" id="index-1"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2606.html"><strong>RFC 2606</strong></a>.
You may also refer to subdomains of this domain, e.g. <tt class="docutils literal"><span class="pre">irc.example.com</span></tt>.</p>
</div>
<div class="section" id="naming-conventions-functions-constants-global-variables-classes-files">
<span id="naming-conventions"></span><h2><a class="toc-backref" href="#id19">Naming Conventions (Functions, Constants, Global Variables, Classes, Files)</a><a class="headerlink" href="#naming-conventions-functions-constants-global-variables-classes-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="files">
<span id="cs-naming-files"></span><h3><a class="toc-backref" href="#id20">Files</a><a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<p>Files containing classes should be named after the content of the last
underscore (<tt class="docutils literal"><span class="pre">_</span></tt>) contained in the class name. If the class name does not
contain any underscore, the file should be named after the class name
as a whole.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You must <strong>ALWAYS</strong> use a separate file for each class or interface
defined in your code.</p>
</div>
<p>The file should also be placed in a hierarchy of directories that is directly
mapped from each segment of the class name obtained after splitting the class
name on underscores and removing the last segment (name of the file itself).</p>
<p>The same holds for interfaces.</p>
<p>The following table shows how files should be arranged depending on the name
of the class/interface they contain:</p>
<table border="1" class="docutils">
<caption>Class/interface name to filesystem mapping</caption>
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Class name</th>
<th class="head">Path on filesystem</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Plop</td>
<td><tt class="samp docutils literal"><em><span class="pre">src</span></em><span class="pre">/Plop.php</span></tt></td>
</tr>
<tr class="row-odd"><td>Plop_Logger</td>
<td><tt class="samp docutils literal"><em><span class="pre">src</span></em><span class="pre">/Plop/Logger.php</span></tt></td>
</tr>
<tr class="row-even"><td>Plop_LoggerInterface</td>
<td><tt class="samp docutils literal"><em><span class="pre">src</span></em><span class="pre">/Plop/Logger/Interface.php</span></tt></td>
</tr>
</tbody>
</table>
<p>This convention is required to make Plop&#8217;s autoloader work.</p>
</div>
<div class="section" id="classes-and-interfaces">
<h3><a class="toc-backref" href="#id21">Classes and interfaces</a><a class="headerlink" href="#classes-and-interfaces" title="Permalink to this headline">¶</a></h3>
<p>Classes and interface should be named using &#8220;UpperCamelCase&#8221;, a newline
should be inserted before the <tt class="docutils literal"><span class="pre">extends</span></tt> and <tt class="docutils literal"><span class="pre">implements</span></tt> keywords
and before the opening curly brace.</p>
<p>When a class implements several interfaces, add a single newline after each
comma separating the interfaces; do not put any space before the comma.
Add extra spaces to line up the class and interface names.</p>
<p>For example:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="k">abstract</span> <span class="k">class</span>  <span class="nc">ConnectionPool</span>
    <span class="k">extends</span>         <span class="nx">PDO</span>
    <span class="k">implements</span>      <span class="nx">Countable</span><span class="p">,</span>
                    <span class="nx">IteratorAggregate</span>
    <span class="p">{</span>
        <span class="o">...</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>Use underscores when you need to logically separate groups of classes.
For example, all classes providing handlers start with the prefix
<tt class="samp docutils literal"><span class="pre">Plop_Handler_</span><em><span class="pre">HandlerName</span></em></tt>.
See also <a class="reference internal" href="#cs-naming-files"><em>Files</em></a> for implications.</p>
<p>For an interface, the text <tt class="docutils literal"><span class="pre">Interface</span></tt> should always appear in the
interface&#8217;s name, preferably at the end (e.g. <tt class="docutils literal"><span class="pre">Plop_FooInterface</span></tt>).
If you prefer to use a separate directory where all the interfaces are stored,
this is also permitted (e.g. <tt class="docutils literal"><span class="pre">Plop_Interface_Handler_Foo</span></tt>).</p>
</div>
<div class="section" id="class-methods-and-properties">
<h3><a class="toc-backref" href="#id22">Class methods and properties</a><a class="headerlink" href="#class-methods-and-properties" title="Permalink to this headline">¶</a></h3>
<p>Class methods and properties should use &#8220;lowerCamelCase&#8221;:</p>
<p>The use of <tt class="docutils literal"><span class="pre">public</span></tt> properties is strongly discouraged, as it allows for
unwanted side effects. It also exposes implementation specific details,
which in turn makes swapping out a class for another implementation
(one of the key reasons to use objects) much harder.
Properties should be considered internal to a class.</p>
<p>All methods and properties of classes must specify their visibility:
<tt class="docutils literal"><span class="pre">public</span></tt>, <tt class="docutils literal"><span class="pre">protected</span></tt>, or <tt class="docutils literal"><span class="pre">private</span></tt>. The PHP 4-style <tt class="docutils literal"><span class="pre">var</span></tt>
declaration must not be used.</p>
<p>The use of <tt class="docutils literal"><span class="pre">private</span></tt> class methods and properties should be avoided—use
<tt class="docutils literal"><span class="pre">protected</span></tt> instead, so that another class could extend your class and change
the behaviour of a method if necessary (e.g. for unit testing purposes).</p>
<p>Use an underscore prefix for <tt class="docutils literal"><span class="pre">protected</span></tt> and <tt class="docutils literal"><span class="pre">private</span></tt> methods
and properties so as to make them easily identifiable.</p>
<p>You may use extra spaces before a property&#8217;s name to line up all properties
of a class.</p>
<p>The following snippet summarizes all of those rules:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="k">class</span> <span class="nc">Foo</span>
    <span class="p">{</span>
        <span class="k">public</span>      <span class="nv">$statementCounter</span><span class="p">;</span>
        <span class="k">protected</span>   <span class="nv">$_statement</span><span class="p">;</span>
        <span class="k">private</span>     <span class="nv">$_lastStatement</span><span class="p">;</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<p>For methods that are <tt class="docutils literal"><span class="pre">static</span></tt>/<tt class="docutils literal"><span class="pre">abstract</span></tt>/<tt class="docutils literal"><span class="pre">final</span></tt>, PHP allows use of the
keywords in any order. We do not impose any order either, except that the
visibility specifier (<tt class="docutils literal"><span class="pre">public</span></tt>, <tt class="docutils literal"><span class="pre">protected</span></tt> or <tt class="docutils literal"><span class="pre">private</span></tt>) should always
be the last keyword.</p>
<p>For example, the snippet below defines four methods. Only the first 2 (two)
forms are accepted in Plop, with the first form being the preferred one
(<tt class="docutils literal"><span class="pre">final</span></tt> or <tt class="docutils literal"><span class="pre">abstract</span></tt> before <tt class="docutils literal"><span class="pre">static</span></tt>):</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="k">class</span> <span class="nc">Foo</span>
    <span class="p">{</span>
        <span class="c1">// This is valid PHP code, and it is accepted in Plop.</span>
        <span class="k">final</span> <span class="k">static</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">foo</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>

        <span class="c1">// This is valid PHP code, and it is also accepted in Plop.</span>
        <span class="k">static</span> <span class="k">final</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">bar</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>

        <span class="c1">// This is valid PHP code, but it is forbidden in Plop&#39;s code.</span>
        <span class="k">final</span> <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">baz</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>

        <span class="c1">// This is valid PHP code, but it is forbidden in Plop&#39;s code.</span>
        <span class="k">public</span> <span class="k">static</span> <span class="k">final</span> <span class="k">function</span> <span class="nf">qux</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="class-constructors">
<h3><a class="toc-backref" href="#id23">Class constructors</a><a class="headerlink" href="#class-constructors" title="Permalink to this headline">¶</a></h3>
<p>Always use the <tt class="docutils literal"><span class="pre">__construct()</span></tt> method to define a class constructor.
Do not use the old PHP 4 convention where the constructor was named
after the class:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="c1">// NO</span>
    <span class="k">class</span> <span class="nc">Bar</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">Bar</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// YES</span>
    <span class="k">class</span> <span class="nc">Baz</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="o">...</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="functions">
<h3><a class="toc-backref" href="#id24">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<p>Functions should be named using lowercase, and words should be separated
with an underscore.</p>
</div>
<div class="section" id="constants">
<h3><a class="toc-backref" href="#id25">Constants</a><a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Constants should always be all-uppercase, with underscores to separate
words. (This includes pre-defined PHP constants like <tt class="docutils literal"><span class="pre">TRUE</span></tt>, <tt class="docutils literal"><span class="pre">FALSE</span></tt>,
and <tt class="docutils literal"><span class="pre">NULL</span></tt>.)</p>
</li>
<li><p class="first">Global constants defined by handlers should also have their names prefixed
by an uppercase spelling of the handler that defines them.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whenever possible, use class constants instead of global constants
to avoid global naming space pollution.</p>
</div>
</li>
<li><p class="first">Global constants should be defined using the <tt class="docutils literal"><span class="pre">const</span></tt> PHP language keyword
(instead of <tt class="docutils literal"><span class="pre">define()</span></tt>), for performance reasons:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="sd">/**</span>
<span class="sd">    * Indicates that the item should be removed</span>
<span class="sd">    * at the next general cache wipe.</span>
<span class="sd">    */</span>
    <span class="k">const</span> <span class="no">CACHE_TEMPORARY</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span><span class="p">;</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <tt class="docutils literal"><span class="pre">const</span></tt> keyword does not work with PHP expressions.
<tt class="docutils literal"><span class="pre">define()</span></tt> should still be used when defining a constant
conditionally or with a non-literal value:</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">defined</span><span class="p">(</span><span class="s1">&#39;MAINTENANCE_MODE&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nb">define</span><span class="p">(</span><span class="s1">&#39;MAINTENANCE_MODE&#39;</span><span class="p">,</span> <span class="s1">&#39;error&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="cp">?&gt;</span><span class="x"></span>
</pre></div>
</div>
</div>
</li>
</ul>
</div>
<div class="section" id="global-variables">
<h3><a class="toc-backref" href="#id26">Global variables</a><a class="headerlink" href="#global-variables" title="Permalink to this headline">¶</a></h3>
<p>Global variables are strictly forbidden in Plop; this is non-negociable.</p>
</div>
</div>
<div class="section" id="check-your-code">
<h2><a class="toc-backref" href="#id27">Check your code</a><a class="headerlink" href="#check-your-code" title="Permalink to this headline">¶</a></h2>
<p>To check that your code complies with these standards, install the following
PEAR packages on your machine:</p>
<ul class="simple">
<li><a class="reference external" href="http://pear.php.net/PHP_CodeSniffer">pear.php.net/PHP_CodeSniffer</a></li>
<li><a class="reference external" href="http://pear.phing.info/">pear.phing.info/Phing</a></li>
</ul>
<p>Now, go to the root directory of the component and run:</p>
<div class="highlight-bash"><div class="highlight"><pre>phing qa_codesniffer
</pre></div>
</div>
<p>This will check your code against the standards described here.</p>
<p>You may also be interested in
<a class="reference internal" href="Prerequisites.html#prerequisites"><em>installing other PEAR packages</em></a> related to
<abbr title="Quality Assurance">QA</abbr>, and then running the full
<abbr title="Quality Assurance">QA</abbr> test suite with:</p>
<div class="highlight-bash"><div class="highlight"><pre>phing qa
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Coding standard</a><ul>
<li><a class="reference internal" href="#indenting-and-whitespace">Indenting and whitespace</a></li>
<li><a class="reference internal" href="#operators">Operators</a></li>
<li><a class="reference internal" href="#casting">Casting</a></li>
<li><a class="reference internal" href="#control-structures">Control structures</a></li>
<li><a class="reference internal" href="#line-length-and-wrapping">Line length and wrapping</a></li>
<li><a class="reference internal" href="#function-method-calls">Function/method calls</a></li>
<li><a class="reference internal" href="#function-method-declarations">Function/method declarations</a></li>
<li><a class="reference internal" href="#class-constructor-calls">Class constructor calls</a></li>
<li><a class="reference internal" href="#arrays">Arrays</a></li>
<li><a class="reference internal" href="#quotes">Quotes</a></li>
<li><a class="reference internal" href="#string-concatenations">String concatenations</a></li>
<li><a class="reference internal" href="#comments">Comments</a></li>
<li><a class="reference internal" href="#filesystem-paths">Filesystem paths</a></li>
<li><a class="reference internal" href="#including-code">Including code</a></li>
<li><a class="reference internal" href="#php-code-tags">PHP code tags</a></li>
<li><a class="reference internal" href="#semicolons">Semicolons</a></li>
<li><a class="reference internal" href="#example-urls">Example URLs</a></li>
<li><a class="reference internal" href="#naming-conventions-functions-constants-global-variables-classes-files">Naming Conventions (Functions, Constants, Global Variables, Classes, Files)</a><ul>
<li><a class="reference internal" href="#files">Files</a></li>
<li><a class="reference internal" href="#classes-and-interfaces">Classes and interfaces</a></li>
<li><a class="reference internal" href="#class-methods-and-properties">Class methods and properties</a></li>
<li><a class="reference internal" href="#class-constructors">Class constructors</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#constants">Constants</a></li>
<li><a class="reference internal" href="#global-variables">Global variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#check-your-code">Check your code</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">Plop 1.0.0dev753 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Erebot.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>